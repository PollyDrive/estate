# –¢–ó: "RealtyBot-Bali" ‚Äî –ê–≥–µ–Ω—Ç-—Ñ–∏–ª—å—Ç—Ä –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç–∏

## 1. –¶–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞

–°–æ–∑–¥–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –∞–≥–µ–Ω—Ç–∞, –∫–æ—Ç–æ—Ä—ã–π 24/7 –æ—Ç—Å–ª–µ–∂–∏–≤–∞–µ—Ç –Ω–æ–≤—ã–µ –æ–±—ä—è–≤–ª–µ–Ω–∏—è –æ–± –∞—Ä–µ–Ω–¥–µ –∂–∏–ª—å—è –Ω–∞ Facebook Marketplace –≤ –∑–∞–¥–∞–Ω–Ω—ã—Ö —Ä–∞–π–æ–Ω–∞—Ö –ë–∞–ª–∏. –ê–≥–µ–Ω—Ç –¥–æ–ª–∂–µ–Ω —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏—è –ø–æ –º–Ω–æ–≥–æ—É—Ä–æ–≤–Ω–µ–≤–æ–π –≤–æ—Ä–æ–Ω–∫–µ (–æ—Ç—Å–µ–∏–≤–∞—è 99% –º—É—Å–æ—Ä–∞) –∏ –ø—Ä–∏—Å—ã–ª–∞—Ç—å —Ç–æ–ª—å–∫–æ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –≤ –ø—Ä–∏–≤–∞—Ç–Ω—É—é –≥—Ä—É–ø–ø—É Telegram.

## 2. –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π

* **–û—Ä–∫–µ—Å—Ç—Ä–∞—Ç–æ—Ä:** `cron` (–¥–ª—è –∑–∞–ø—É—Å–∫–∞ —Å–∫—Ä–∏–ø—Ç–∞ –ø–æ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏—é).
* **–Ø–∑—ã–∫/–õ–æ–≥–∏–∫–∞:** `Python 3`.
* **–°–±–æ—Ä –¥–∞–Ω–Ω—ã—Ö:** `Apify` (API "Facebook Marketplace Scraper").
* **–•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö:** `PostgreSQL` (–¥–ª—è –¥–µ–¥—É–ø–ª–∏–∫–∞—Ü–∏–∏ –∏ —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è).
* **–£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è:** `Telegram Bot API`.
* **AI-–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è (–í–æ—Ä–æ–Ω–∫–∞):**
    * –£—Ä–æ–≤–µ–Ω—å 1 (–±–µ—Å–ø–ª–∞—Ç–Ω–æ): `Groq API` (Llama 3 8B).
    * –£—Ä–æ–≤–µ–Ω—å 2 (–¥–µ—à–µ–≤–æ): `Anthropic API` (Claude 3 Haiku).

---

## 3. –°—Ö–µ–º–∞ –ë–∞–∑—ã –î–∞–Ω–Ω—ã—Ö (PostgreSQL)

–°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É `fb_listings` –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤—Å–µ—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π, –∫–æ—Ç–æ—Ä—ã–µ –±–æ—Ç –∫–æ–≥–¥–∞-–ª–∏–±–æ –≤–∏–¥–µ–ª, –∏ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –¥—É–±–ª–∏–∫–∞—Ç–æ–≤.

```sql
CREATE TABLE fb_listings (
    id SERIAL PRIMARY KEY,
    fb_id TEXT NOT NULL UNIQUE,          -- ID –æ–±—ä—è–≤–ª–µ–Ω–∏—è —Å Facebook
    title TEXT,
    price TEXT,
    location TEXT,
    listing_url TEXT NOT NULL,
    description TEXT,
    phone_number TEXT NULL,              -- –ù–æ–º–µ—Ä, –µ—Å–ª–∏ –Ω–∞–π–¥–µ–Ω –≤ —Ç–µ–∫—Å—Ç–µ
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    sent_to_telegram BOOLEAN DEFAULT FALSE -- –§–ª–∞–≥: –±—ã–ª–æ –ª–∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
);
4. –õ–æ–≥–∏–∫–∞ –†–∞–±–æ—Ç—ã (–°–∫—Ä–∏–ø—Ç main.py)
–°–∫—Ä–∏–ø—Ç –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –ø–æ cron –∫–∞–∂–¥—ã–µ 15-30 –º–∏–Ω—É—Ç.

–°–ë–û–†: –°–∫—Ä–∏–ø—Ç –æ–±—Ä–∞—â–∞–µ—Ç—Å—è –∫ API Apify –∏ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç N –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –æ–±—ä—è–≤–ª–µ–Ω–∏–π –ø–æ —Ç—Ä–µ–º —Ü–µ–ª–µ–≤—ã–º URL (—Ä–∞–π–æ–Ω—ã: Abiansemal, Singakerta, Mengwi).

–¶–ò–ö–õ: –°–∫—Ä–∏–ø—Ç –∏—Ç–µ—Ä–∏—Ä—É–µ—Ç—Å—è –ø–æ –∫–∞–∂–¥–æ–º—É –ø–æ–ª—É—á–µ–Ω–Ω–æ–º—É –æ–±—ä—è–≤–ª–µ–Ω–∏—é.

–î–ï–î–£–ü–õ–ò–ö–ê–¶–ò–Ø:

–í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è SELECT 1 FROM fb_listings WHERE fb_id = [id_–æ–±—ä—è–≤–ª–µ–Ω–∏—è].

–ï—Å–ª–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –Ω–∞–π–¥–µ–Ω–æ (—Å—Ç–∞—Ä–æ–µ) -> –ò–≥–Ω–æ—Ä–∏—Ä–æ–≤–∞—Ç—å, –ø–µ—Ä–µ–π—Ç–∏ –∫ —Å–ª–µ–¥—É—é—â–µ–º—É.

–ï—Å–ª–∏ –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ (–Ω–æ–≤–æ–µ) -> –ü–µ—Ä–µ–π—Ç–∏ –∫ –®–∞–≥—É 4 (–§–∏–ª—å—Ç—Ä–∞—Ü–∏—è).

–í–û–†–û–ù–ö–ê –§–ò–õ–¨–¢–†–ê–¶–ò–ò:

–£—Ä–æ–≤–µ–Ω—å 0: –ñ–µ—Å—Ç–∫–∏–π —Ñ–∏–ª—å—Ç—Ä (Python + Regex)
–¶–µ–Ω–∞: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Ü–µ–Ω–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ –∑–∞–¥–∞–Ω–Ω–æ–º –¥–∏–∞–ø–∞–∑–æ–Ω–µ (min/max).

–°—Ç–æ–ø-—Å–ª–æ–≤–∞: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å title –∏ description –Ω–∞ –Ω–∞–ª–∏—á–∏–µ —Å—Ç–æ–ø-—Å–ª–æ–≤ (–Ω–∞–ø—Ä., "daily", "harian", "–ø–æ—Å—É—Ç–æ—á–Ω–æ").

–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ —Å–ª–æ–≤–∞: –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ –≤ description –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –µ—Å—Ç—å "kitchen" –∏–ª–∏ "kitchenette".

–ü–æ–∏—Å–∫ —Ç–µ–ª–µ—Ñ–æ–Ω–∞: –ü—Ä–æ–≥–Ω–∞—Ç—å Regex –ø–æ description –¥–ª—è –ø–æ–∏—Å–∫–∞ –∏–Ω–¥–æ–Ω–µ–∑–∏–π—Å–∫–∏—Ö –Ω–æ–º–µ—Ä–æ–≤ (08..., +62...). –ï—Å–ª–∏ –Ω–∞–π–¥–µ–Ω, —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—É—é.

–†–µ–∑—É–ª—å—Ç–∞—Ç: –ï—Å–ª–∏ –ª—é–±–æ–π —Ñ–∏–ª—å—Ç—Ä –Ω–µ –ø—Ä–æ–π–¥–µ–Ω -> INSERT –≤ fb_listings (—Å sent_to_telegram = FALSE) -> –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É —ç—Ç–æ–≥–æ –æ–±—ä—è–≤–ª–µ–Ω–∏—è.

–£—Ä–æ–≤–µ–Ω—å 1: –ë–µ—Å–ø–ª–∞—Ç–Ω—ã–π LLM-—Ñ–∏–ª—å—Ç—Ä (Groq)
–ó–∞–¥–∞—á–∞: –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ –∫—É—Ö–Ω–∏.

–ü—Ä–æ–º—Ç (–¥–ª—è Llama 3 8B): "You are a real estate assistant. Read the description. Answer only 'YES' or 'NO'. Is there a kitchen or kitchenette suitable for cooking? Description: [—Ç–µ–∫—Å—Ç description]"

–†–µ–∑—É–ª—å—Ç–∞—Ç: –ï—Å–ª–∏ –æ—Ç–≤–µ—Ç 'NO' -> INSERT –≤ fb_listings (—Å sent_to_telegram = FALSE) -> –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É —ç—Ç–æ–≥–æ –æ–±—ä—è–≤–ª–µ–Ω–∏—è.

–£—Ä–æ–≤–µ–Ω—å 2: –ü–ª–∞—Ç–Ω—ã–π LLM-–∞–Ω–∞–ª–∏–∑ (Claude 3 Haiku)
–ó–∞–¥–∞—á–∞: –§–∏–Ω–∞–ª—å–Ω–∞—è –æ—Ü–µ–Ω–∫–∞ –∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è.

–ü—Ä–æ–º—Ç: "–¢—ã ‚Äî –º–æ–π –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç –ø–æ –ø–æ–∏—Å–∫—É –∂–∏–ª—å—è –Ω–∞ –ë–∞–ª–∏. –Ø –∏—â—É [—Ç–≤–æ–∏ –∫—Ä–∏—Ç–µ—Ä–∏–∏]. –ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä—É–π –æ–±—ä—è–≤–ª–µ–Ω–∏–µ: [Title, Price, Description].

–ö—Ä–∞—Ç–∫–æ –Ω–∞–ø–∏—à–∏ –º–Ω–µ –≤—ã–∂–∏–º–∫—É –Ω–∞ —Ä—É—Å—Å–∫–æ–º (1-2 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è).

–°–≥–µ–Ω–µ—Ä–∏—Ä—É–π –≤–µ–∂–ª–∏–≤–æ–µ –ø–µ—Ä–≤–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –≤–ª–∞–¥–µ–ª—å—Ü—É –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º.

–°–≥–µ–Ω–µ—Ä–∏—Ä—É–π —ç—Ç–æ –∂–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –Ω–∞ –∏–Ω–¥–æ–Ω–µ–∑–∏–π—Å–∫–æ–º (Bahasa). –û—Ç–≤–µ—Ç—å –≤ —Ñ–æ—Ä–º–∞—Ç–µ JSON: {\"summary_ru\": \"...\", \"msg_en\": \"...\", \"msg_id\": \"...\"}"

–†–µ–∑—É–ª—å—Ç–∞—Ç: –ü–æ–ª—É—á–∏—Ç—å JSON —Å —Ç–µ–∫—Å—Ç–∞–º–∏.

–£–í–ï–î–û–ú–õ–ï–ù–ò–ï (Telegram):

–°—Ñ–æ—Ä–º–∏—Ä–æ–≤–∞—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ, –∏—Å–ø–æ–ª—å–∑—É—è JSON –∏–∑ –£—Ä–æ–≤–Ω—è 2.

–§–æ—Ä–º–∞—Ç —Å–æ–æ–±—â–µ–Ω–∏—è:

üè° *–ù–æ–≤—ã–π –≤–∞—Ä–∏–∞–Ω—Ç!*

*–í—ã–∂–∏–º–∫–∞:* [summary_ru –∏–∑ JSON]
*–¶–µ–Ω–∞:* [price]
*–¢–µ–ª–µ—Ñ–æ–Ω (–µ—Å–ª–∏ –Ω–∞–π–¥–µ–Ω):* [phone_number]

*–°—Å—ã–ª–∫–∞:* [listing_url]

---
*–°–æ–æ–±—â–µ–Ω–∏–µ (—Å–∫–æ–ø–∏—Ä—É–π –∏ –≤—Å—Ç–∞–≤—å):*

*(EN):*
[msg_en –∏–∑ JSON]

*(ID):*
[msg_id –∏–∑ JSON]
–û—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –ø—Ä–∏–≤–∞—Ç–Ω—É—é –≥—Ä—É–ø–ø—É —á–µ—Ä–µ–∑ Telegram Bot API.

–õ–û–ì–ò–†–û–í–ê–ù–ò–ï:

INSERT –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –≤ fb_listings —Å —Ñ–ª–∞–≥–æ–º sent_to_telegram = TRUE –∏ phone_number (–µ—Å–ª–∏ –±—ã–ª –Ω–∞–π–¥–µ–Ω).

5. –ö–ª—é—á–µ–≤—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è (–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å)
–¢–æ–ª—å–∫–æ Telegram: –ù–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å WhatsApp API (–Ω–∏ –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω—ã–π, –Ω–∏ "—Å–µ—Ä—ã–π") –∏–∑-–∑–∞ –≤—ã—Å–æ–∫–æ–≥–æ —Ä–∏—Å–∫–∞ –±–∞–Ω–∞ –ª–∏—á–Ω–æ–≥–æ –Ω–æ–º–µ—Ä–∞ –∏ —Å–ª–æ–∂–Ω–æ—Å—Ç–∏/—Å—Ç–æ–∏–º–æ—Å—Ç–∏.

"Human-in-the-Loop": –ö–∞—Ç–µ–≥–æ—Ä–∏—á–µ—Å–∫–∏ –∑–∞–ø—Ä–µ—â–µ–Ω–æ –ø—ã—Ç–∞—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É —Å–æ–æ–±—â–µ–Ω–∏–π —á–µ—Ä–µ–∑ Facebook Messenger (—Å –ø–æ–º–æ—â—å—é Selenium/Playwright). –≠—Ç–æ –ø—Ä–∏–≤–µ–¥–µ—Ç –∫ –±–∞–Ω—É –ª–∏—á–Ω–æ–≥–æ Facebook-–∞–∫–∫–∞—É–Ω—Ç–∞. –ë–æ—Ç —Ç–æ–ª—å–∫–æ –≥–æ—Ç–æ–≤–∏—Ç —Ç–µ–∫—Å—Ç, –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å (—á–µ–ª–æ–≤–µ–∫) —Å–∞–º –Ω–∞–∂–∏–º–∞–µ—Ç "–û—Ç–ø—Ä–∞–≤–∏—Ç—å".
